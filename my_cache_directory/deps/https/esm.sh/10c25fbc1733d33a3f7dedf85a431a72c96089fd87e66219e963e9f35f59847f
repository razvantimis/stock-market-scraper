/* esm.sh - esbuild bundle(cheerio-select@2.1.0) deno production */
import{parse as D,SelectorType as S,isTraversal as y}from"/v106/css-what@6.1.0/deno/css-what.js";import{_compileToken as I,prepareContext as E}from"/v106/css-select@5.1.0/deno/css-select.js";import*as o from"/v106/domutils@3.0.1/deno/domutils.js";import*as F from"/v106/boolbase@1.0.0/deno/boolbase.js";var P=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function g(e){return e.type!=="pseudo"?!1:P.has(e.name)?!0:e.name==="not"&&Array.isArray(e.data)?e.data.some(t=>t.some(g)):!1}function U(e,t,n){let r=t!=null?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(r)?r>=0?r+1:1/0:0;case"lt":return isFinite(r)?r>=0?Math.min(r,n):1/0:0;case"gt":return isFinite(r)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}function A(e){for(;e.parent;)e=e.parent;return e}function m(e){let t=[],n=[];for(let r of e)r.some(g)?t.push(r):n.push(r);return[n,t]}import{filters as X,pseudos as Y,aliases as Z}from"/v106/css-select@5.1.0/deno/css-select.js";var C={type:S.Universal,namespace:null},R={type:S.Pseudo,name:"scope",data:null};function G(e,t,n={}){return k([e],t,n)}function k(e,t,n={}){if(typeof t=="function")return e.some(t);let[r,i]=m(D(t));return r.length>0&&e.some(I(r,n))||i.some(s=>w(s,e,n).length>0)}function L(e,t,n,r){let i=typeof n=="string"?parseInt(n,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(i)&&Math.abs(i)<t.length?[i<0?t[t.length+i]:t[i]]:[];case"gt":return isFinite(i)?t.slice(i+1):[];case"even":return t.filter((s,f)=>f%2===0);case"odd":return t.filter((s,f)=>f%2===1);case"not":{let s=new Set(N(n,t,r));return t.filter(f=>!s.has(f))}}}function J(e,t,n={}){return N(D(e),t,n)}function N(e,t,n){if(t.length===0)return[];let[r,i]=m(e),s;if(r.length){let f=v(t,r,n);if(i.length===0)return f;f.length&&(s=new Set(f))}for(let f=0;f<i.length&&s?.size!==t.length;f++){let u=i[f];if((s?t.filter(h=>o.isTag(h)&&!s.has(h)):t).length===0)break;let l=w(u,t,n);if(l.length)if(s)l.forEach(h=>s.add(h));else{if(f===i.length-1)return l;s=new Set(l)}}return typeof s<"u"?s.size===t.length?t:t.filter(f=>s.has(f)):[]}function w(e,t,n){var r;if(e.some(y)){let i=(r=n.root)!==null&&r!==void 0?r:A(t[0]),s={...n,context:t,relativeSelector:!1};return e.push(R),x(i,e,s,!0,t.length)}return x(t,e,n,!1,t.length)}function K(e,t,n={},r=1/0){if(typeof e=="function")return _(t,e);let[i,s]=m(D(e)),f=s.map(u=>x(t,u,n,!0,r));return i.length&&f.push(b(t,i,n,r)),f.length===0?[]:f.length===1?f[0]:o.uniqueSort(f.reduce((u,d)=>[...u,...d]))}function x(e,t,n,r,i){let s=t.findIndex(g),f=t.slice(0,s),u=t[s],d=t.length-1===s?i:1/0,l=U(u.name,u.data,d);if(l===0)return[];let q=(f.length===0&&!Array.isArray(e)?o.getChildren(e).filter(o.isTag):f.length===0?(Array.isArray(e)?e:[e]).filter(o.isTag):r||f.some(y)?b(e,[f],n,l):v(e,[f],n)).slice(0,l),a=L(u.name,q,u.data,n);if(a.length===0||t.length===s+1)return a;let c=t.slice(s+1),T=c.some(y);if(T){if(y(c[0])){let{type:p}=c[0];(p===S.Sibling||p===S.Adjacent)&&(a=E(a,o,!0)),c.unshift(C)}n={...n,relativeSelector:!1,rootFunc:p=>a.includes(p)}}else n.rootFunc&&n.rootFunc!==F.trueFunc&&(n={...n,rootFunc:F.trueFunc});return c.some(g)?x(a,c,n,!1,i):T?b(a,[c],n,i):v(a,[c],n)}function b(e,t,n,r){let i=I(t,n,e);return _(e,i,r)}function _(e,t,n=1/0){let r=E(e,o,t.shouldTestNextSiblings);return o.find(i=>o.isTag(i)&&t(i),r,!0,n)}function v(e,t,n){let r=(Array.isArray(e)?e:[e]).filter(o.isTag);if(r.length===0)return r;let i=I(t,n);return i===F.trueFunc?r:r.filter(i)}export{Z as aliases,J as filter,X as filters,G as is,Y as pseudos,K as select,k as some};
