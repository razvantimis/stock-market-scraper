/* esm.sh - esbuild bundle(css-select@5.1.0) deno production */
import*as J from"/v106/domutils@3.0.1/deno/domutils.js";import Q from"/v106/boolbase@1.0.0/deno/boolbase.js";import{parse as ie,SelectorType as h}from"/v106/css-what@6.1.0/deno/css-what.js";import b from"/v106/boolbase@1.0.0/deno/boolbase.js";import{AttributeAction as m,SelectorType as w}from"/v106/css-what@6.1.0/deno/css-what.js";var W=new Map([[w.Universal,50],[w.Tag,30],[w.Attribute,1],[w.Pseudo,0]]);function A(e){return!W.has(e.type)}var te=new Map([[m.Exists,10],[m.Equals,8],[m.Not,7],[m.Start,6],[m.End,6],[m.Any,5]]);function _(e){let t=e.map(H);for(let n=1;n<e.length;n++){let r=t[n];if(!(r<0))for(let i=n-1;i>=0&&r<t[i];i--){let s=e[i+1];e[i+1]=e[i],e[i]=s,t[i+1]=t[i],t[i]=r}}}function H(e){var t,n;let r=(t=W.get(e.type))!==null&&t!==void 0?t:-1;return e.type===w.Attribute?(r=(n=te.get(e.action))!==null&&n!==void 0?n:4,e.action===m.Equals&&e.name==="id"&&(r=9),e.ignoreCase&&(r>>=1)):e.type===w.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?r=0:Array.isArray(e.data)?(r=Math.min(...e.data.map(i=>Math.min(...i.map(H)))),r<0&&(r=0)):r=2:r=3),r}import T from"/v106/boolbase@1.0.0/deno/boolbase.js";var ne=/[-[\]{}()*+?.,\\^$|#\s]/g;function K(e){return e.replace(ne,"\\$&")}var re=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function y(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&re.has(e.name)}var z={equals(e,t,n){let{adapter:r}=n,{name:i}=t,{value:s}=t;return y(t,n)?(s=s.toLowerCase(),o=>{let a=r.getAttributeValue(o,i);return a!=null&&a.length===s.length&&a.toLowerCase()===s&&e(o)}):o=>r.getAttributeValue(o,i)===s&&e(o)},hyphen(e,t,n){let{adapter:r}=n,{name:i}=t,{value:s}=t,o=s.length;return y(t,n)?(s=s.toLowerCase(),function(u){let l=r.getAttributeValue(u,i);return l!=null&&(l.length===o||l.charAt(o)==="-")&&l.substr(0,o).toLowerCase()===s&&e(u)}):function(u){let l=r.getAttributeValue(u,i);return l!=null&&(l.length===o||l.charAt(o)==="-")&&l.substr(0,o)===s&&e(u)}},element(e,t,n){let{adapter:r}=n,{name:i,value:s}=t;if(/\s/.test(s))return T.falseFunc;let o=new RegExp(`(?:^|\\s)${K(s)}(?:$|\\s)`,y(t,n)?"i":"");return function(u){let l=r.getAttributeValue(u,i);return l!=null&&l.length>=s.length&&o.test(l)&&e(u)}},exists(e,{name:t},{adapter:n}){return r=>n.hasAttrib(r,t)&&e(r)},start(e,t,n){let{adapter:r}=n,{name:i}=t,{value:s}=t,o=s.length;return o===0?T.falseFunc:y(t,n)?(s=s.toLowerCase(),a=>{let u=r.getAttributeValue(a,i);return u!=null&&u.length>=o&&u.substr(0,o).toLowerCase()===s&&e(a)}):a=>{var u;return!!(!((u=r.getAttributeValue(a,i))===null||u===void 0)&&u.startsWith(s))&&e(a)}},end(e,t,n){let{adapter:r}=n,{name:i}=t,{value:s}=t,o=-s.length;return o===0?T.falseFunc:y(t,n)?(s=s.toLowerCase(),a=>{var u;return((u=r.getAttributeValue(a,i))===null||u===void 0?void 0:u.substr(o).toLowerCase())===s&&e(a)}):a=>{var u;return!!(!((u=r.getAttributeValue(a,i))===null||u===void 0)&&u.endsWith(s))&&e(a)}},any(e,t,n){let{adapter:r}=n,{name:i,value:s}=t;if(s==="")return T.falseFunc;if(y(t,n)){let o=new RegExp(K(s),"i");return function(u){let l=r.getAttributeValue(u,i);return l!=null&&l.length>=s.length&&o.test(l)&&e(u)}}return o=>{var a;return!!(!((a=r.getAttributeValue(o,i))===null||a===void 0)&&a.includes(s))&&e(o)}},not(e,t,n){let{adapter:r}=n,{name:i}=t,{value:s}=t;return s===""?o=>!!r.getAttributeValue(o,i)&&e(o):y(t,n)?(s=s.toLowerCase(),o=>{let a=r.getAttributeValue(o,i);return(a==null||a.length!==s.length||a.toLowerCase()!==s)&&e(o)}):o=>r.getAttributeValue(o,i)!==s&&e(o)}};import{parse as se}from"/v106/css-what@6.1.0/deno/css-what.js";import C from"/v106/nth-check@2.1.1/deno/nth-check.js";import g from"/v106/boolbase@1.0.0/deno/boolbase.js";function E(e,t){return n=>{let r=t.getParent(n);return r!=null&&t.isTag(r)&&e(n)}}var S={contains(e,t,{adapter:n}){return function(i){return e(i)&&n.getText(i).includes(t)}},icontains(e,t,{adapter:n}){let r=t.toLowerCase();return function(s){return e(s)&&n.getText(s).toLowerCase().includes(r)}},"nth-child"(e,t,{adapter:n,equals:r}){let i=C(t);return i===g.falseFunc?g.falseFunc:i===g.trueFunc?E(e,n):function(o){let a=n.getSiblings(o),u=0;for(let l=0;l<a.length&&!r(o,a[l]);l++)n.isTag(a[l])&&u++;return i(u)&&e(o)}},"nth-last-child"(e,t,{adapter:n,equals:r}){let i=C(t);return i===g.falseFunc?g.falseFunc:i===g.trueFunc?E(e,n):function(o){let a=n.getSiblings(o),u=0;for(let l=a.length-1;l>=0&&!r(o,a[l]);l--)n.isTag(a[l])&&u++;return i(u)&&e(o)}},"nth-of-type"(e,t,{adapter:n,equals:r}){let i=C(t);return i===g.falseFunc?g.falseFunc:i===g.trueFunc?E(e,n):function(o){let a=n.getSiblings(o),u=0;for(let l=0;l<a.length;l++){let c=a[l];if(r(o,c))break;n.isTag(c)&&n.getName(c)===n.getName(o)&&u++}return i(u)&&e(o)}},"nth-last-of-type"(e,t,{adapter:n,equals:r}){let i=C(t);return i===g.falseFunc?g.falseFunc:i===g.trueFunc?E(e,n):function(o){let a=n.getSiblings(o),u=0;for(let l=a.length-1;l>=0;l--){let c=a[l];if(r(o,c))break;n.isTag(c)&&n.getName(c)===n.getName(o)&&u++}return i(u)&&e(o)}},root(e,t,{adapter:n}){return r=>{let i=n.getParent(r);return(i==null||!n.isTag(i))&&e(r)}},scope(e,t,n,r){let{equals:i}=n;return!r||r.length===0?S.root(e,t,n):r.length===1?s=>i(r[0],s)&&e(s):s=>r.includes(s)&&e(s)},hover:L("isHovered"),visited:L("isVisited"),active:L("isActive")};function L(e){return function(n,r,{adapter:i}){let s=i[e];return typeof s!="function"?g.falseFunc:function(a){return s(a)&&n(a)}}}var F={empty(e,{adapter:t}){return!t.getChildren(e).some(n=>t.isTag(n)||t.getText(n)!=="")},"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return t.prevElementSibling(e)==null;let r=t.getSiblings(e).find(i=>t.isTag(i));return r!=null&&n(e,r)},"last-child"(e,{adapter:t,equals:n}){let r=t.getSiblings(e);for(let i=r.length-1;i>=0;i--){if(n(e,r[i]))return!0;if(t.isTag(r[i]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){let r=t.getSiblings(e),i=t.getName(e);for(let s=0;s<r.length;s++){let o=r[s];if(n(e,o))return!0;if(t.isTag(o)&&t.getName(o)===i)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){let r=t.getSiblings(e),i=t.getName(e);for(let s=r.length-1;s>=0;s--){let o=r[s];if(n(e,o))return!0;if(t.isTag(o)&&t.getName(o)===i)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){let r=t.getName(e);return t.getSiblings(e).every(i=>n(e,i)||!t.isTag(i)||t.getName(i)!==r)},"only-child"(e,{adapter:t,equals:n}){return t.getSiblings(e).every(r=>n(e,r)||!t.isTag(r))}};function k(e,t,n,r){if(n===null){if(e.length>r)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===r)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}var O={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};import p from"/v106/boolbase@1.0.0/deno/boolbase.js";var V={};function q(e,t){return e===p.falseFunc?p.falseFunc:n=>t.isTag(n)&&e(n)}function M(e,t){let n=t.getSiblings(e);if(n.length<=1)return[];let r=n.indexOf(e);return r<0||r===n.length-1?[]:n.slice(r+1).filter(t.isTag)}function R(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}var D=(e,t,n,r,i)=>{let s=i(t,R(n),r);return s===p.trueFunc?e:s===p.falseFunc?p.falseFunc:o=>s(o)&&e(o)},N={is:D,matches:D,where:D,not(e,t,n,r,i){let s=i(t,R(n),r);return s===p.falseFunc?e:s===p.trueFunc?p.falseFunc:o=>!s(o)&&e(o)},has(e,t,n,r,i){let{adapter:s}=n,o=R(n);o.relativeSelector=!0;let a=t.some(c=>c.some(A))?[V]:void 0,u=i(t,o,a);if(u===p.falseFunc)return p.falseFunc;let l=q(u,s);if(a&&u!==p.trueFunc){let{shouldTestNextSiblings:c=!1}=u;return f=>{if(!e(f))return!1;a[0]=f;let v=s.getChildren(f),ee=c?[...v,...M(f,s)]:v;return s.existsOne(l,ee)}}return c=>e(c)&&s.existsOne(l,s.getChildren(c))}};function B(e,t,n,r,i){var s;let{name:o,data:a}=t;if(Array.isArray(a)){if(!(o in N))throw new Error(`Unknown pseudo-class :${o}(${a})`);return N[o](e,a,n,r,i)}let u=(s=n.pseudos)===null||s===void 0?void 0:s[o],l=typeof u=="string"?u:O[o];if(typeof l=="string"){if(a!=null)throw new Error(`Pseudo ${o} doesn't have any arguments`);let c=se(l);return N.is(e,c,n,r,i)}if(typeof u=="function")return k(u,o,a,1),c=>u(c,a)&&e(c);if(o in S)return S[o](e,a,n,r);if(o in F){let c=F[o];return k(c,o,a,2),f=>c(f,n,a)&&e(f)}throw new Error(`Unknown pseudo-class :${o}`)}import{SelectorType as d}from"/v106/css-what@6.1.0/deno/css-what.js";function $(e,t){let n=t.getParent(e);return n&&t.isTag(n)?n:null}function G(e,t,n,r,i){let{adapter:s,equals:o}=n;switch(t.type){case d.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case d.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case d.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),z[t.action](e,t,n)}case d.Pseudo:return B(e,t,n,r,i);case d.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:a}=t;return(!n.xmlMode||n.lowerCaseTags)&&(a=a.toLowerCase()),function(l){return s.getName(l)===a&&e(l)}}case d.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(l){let c=l;for(;c=$(c,s);)if(e(c))return!0;return!1};let a=new WeakSet;return function(l){let c=l;for(;c=$(c,s);)if(!a.has(c)){if(s.isTag(c)&&e(c))return!0;a.add(c)}return!1}}case"_flexibleDescendant":return function(u){let l=u;do if(e(l))return!0;while(l=$(l,s));return!1};case d.Parent:return function(u){return s.getChildren(u).some(l=>s.isTag(l)&&e(l))};case d.Child:return function(u){let l=s.getParent(u);return l!=null&&s.isTag(l)&&e(l)};case d.Sibling:return function(u){let l=s.getSiblings(u);for(let c=0;c<l.length;c++){let f=l[c];if(o(u,f))break;if(s.isTag(f)&&e(f))return!0}return!1};case d.Adjacent:return s.prevElementSibling?function(u){let l=s.prevElementSibling(u);return l!=null&&e(l)}:function(u){let l=s.getSiblings(u),c;for(let f=0;f<l.length;f++){let v=l[f];if(o(u,v))break;s.isTag(v)&&(c=v)}return!!c&&e(c)};case d.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}function U(e,t,n){let r=P(e,t,n);return q(r,t.adapter)}function P(e,t,n){let r=typeof e=="string"?ie(e):e;return x(r,t,n)}function X(e){return e.type===h.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(t=>t.some(X)))}var oe={type:h.Descendant},ue={type:"_flexibleDescendant"},ae={type:h.Pseudo,name:"scope",data:null};function le(e,{adapter:t},n){let r=!!n?.every(i=>{let s=t.isTag(i)&&t.getParent(i);return i===V||s&&t.isTag(s)});for(let i of e){if(!(i.length>0&&A(i[0])&&i[0].type!==h.Descendant))if(r&&!i.some(X))i.unshift(oe);else continue;i.unshift(ae)}}function x(e,t,n){var r;e.forEach(_),n=(r=t.context)!==null&&r!==void 0?r:n;let i=Array.isArray(n),s=n&&(Array.isArray(n)?n:[n]);if(t.relativeSelector!==!1)le(e,t,s);else if(e.some(u=>u.length>0&&A(u[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let o=!1,a=e.map(u=>{if(u.length>=2){let[l,c]=u;l.type!==h.Pseudo||l.name!=="scope"||(i&&c.type===h.Descendant?u[1]=ue:(c.type===h.Adjacent||c.type===h.Sibling)&&(o=!0))}return ce(u,t,s)}).reduce(fe,b.falseFunc);return a.shouldTestNextSiblings=o,a}function ce(e,t,n){var r;return e.reduce((i,s)=>i===b.falseFunc?b.falseFunc:G(i,s,t,n,x),(r=t.rootFunc)!==null&&r!==void 0?r:b.trueFunc)}function fe(e,t){return t===b.falseFunc||e===b.trueFunc?e:e===b.falseFunc||t===b.trueFunc?t:function(r){return e(r)||t(r)}}var Y=(e,t)=>e===t,ge={adapter:J,equals:Y};function I(e){var t,n,r,i;let s=e??ge;return(t=s.adapter)!==null&&t!==void 0||(s.adapter=J),(n=s.equals)!==null&&n!==void 0||(s.equals=(i=(r=s.adapter)===null||r===void 0?void 0:r.equals)!==null&&i!==void 0?i:Y),s}function j(e){return function(n,r,i){let s=I(r);return e(n,s,i)}}var Be=j(U),Ge=j(P),Xe=j(x);function Z(e){return function(n,r,i){let s=I(i);typeof n!="function"&&(n=P(n,s,r));let o=pe(r,s.adapter,n.shouldTestNextSiblings);return e(n,o,s)}}function pe(e,t,n=!1){return n&&(e=de(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}function de(e,t){let n=Array.isArray(e)?e.slice(0):[e],r=n.length;for(let i=0;i<r;i++){let s=M(n[i],t);n.push(...s)}return n}var he=Z((e,t,n)=>e===Q.falseFunc||!t||t.length===0?[]:n.adapter.findAll(e,t)),Je=Z((e,t,n)=>e===Q.falseFunc||!t||t.length===0?null:n.adapter.findOne(e,t));function Qe(e,t,n){let r=I(n);return(typeof t=="function"?t:U(t,r))(e)}var Ye=he;export{Xe as _compileToken,Ge as _compileUnsafe,O as aliases,Be as compile,Ye as default,S as filters,Qe as is,pe as prepareContext,F as pseudos,he as selectAll,Je as selectOne};
